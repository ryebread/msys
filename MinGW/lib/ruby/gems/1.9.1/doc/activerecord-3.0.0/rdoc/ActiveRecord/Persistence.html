<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Module: ActiveRecord::Persistence</title>

	<link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

	<script src="../js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="module">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="../lib/active_record/persistence_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/active_record/persistence.rb">lib/active_record/persistence.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			

			<!-- Namespace Contents -->
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-i-attributes_from_column_definition">#attributes_from_column_definition</a></li>
					
					<li><a href="#method-i-becomes">#becomes</a></li>
					
					<li><a href="#method-i-create">#create</a></li>
					
					<li><a href="#method-i-create_or_update">#create_or_update</a></li>
					
					<li><a href="#method-i-decrement">#decrement</a></li>
					
					<li><a href="#method-i-decrement%21">#decrement!</a></li>
					
					<li><a href="#method-i-delete">#delete</a></li>
					
					<li><a href="#method-i-destroy">#destroy</a></li>
					
					<li><a href="#method-i-destroyed%3F">#destroyed?</a></li>
					
					<li><a href="#method-i-increment">#increment</a></li>
					
					<li><a href="#method-i-increment%21">#increment!</a></li>
					
					<li><a href="#method-i-new_record%3F">#new_record?</a></li>
					
					<li><a href="#method-i-persisted%3F">#persisted?</a></li>
					
					<li><a href="#method-i-reload">#reload</a></li>
					
					<li><a href="#method-i-save">#save</a></li>
					
					<li><a href="#method-i-save%21">#save!</a></li>
					
					<li><a href="#method-i-toggle">#toggle</a></li>
					
					<li><a href="#method-i-toggle%21">#toggle!</a></li>
					
					<li><a href="#method-i-touch">#touch</a></li>
					
					<li><a href="#method-i-update">#update</a></li>
					
					<li><a href="#method-i-update_attribute">#update_attribute</a></li>
					
					<li><a href="#method-i-update_attributes">#update_attributes</a></li>
					
					<li><a href="#method-i-update_attributes%21">#update_attributes!</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="../README_rdoc.html">README.rdoc</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="../images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="../ActiveRecord/ActiveRecordError.html">ActiveRecord::ActiveRecordError</a></li>
				
					<li><a href="../ActiveRecord/AdapterNotFound.html">ActiveRecord::AdapterNotFound</a></li>
				
					<li><a href="../ActiveRecord/AdapterNotSpecified.html">ActiveRecord::AdapterNotSpecified</a></li>
				
					<li><a href="../ActiveRecord/Aggregations/ClassMethods.html">ActiveRecord::Aggregations::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/AssociationPreload/ClassMethods.html">ActiveRecord::AssociationPreload::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/AssociationTypeMismatch.html">ActiveRecord::AssociationTypeMismatch</a></li>
				
					<li><a href="../ActiveRecord/Associations/ClassMethods.html">ActiveRecord::Associations::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/Associations/ClassMethods/o.html">ActiveRecord::Associations::ClassMethods::o</a></li>
				
					<li><a href="../ActiveRecord/Associations/HasOneThroughAssociation.html">ActiveRecord::Associations::HasOneThroughAssociation</a></li>
				
					<li><a href="../ActiveRecord/Associations/ThroughAssociationScope.html">ActiveRecord::Associations::ThroughAssociationScope</a></li>
				
					<li><a href="../ActiveRecord/AttributeAssignmentError.html">ActiveRecord::AttributeAssignmentError</a></li>
				
					<li><a href="../ActiveRecord/AttributeMethods/BeforeTypeCast.html">ActiveRecord::AttributeMethods::BeforeTypeCast</a></li>
				
					<li><a href="../ActiveRecord/AttributeMethods/ClassMethods.html">ActiveRecord::AttributeMethods::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/AttributeMethods/Dirty.html">ActiveRecord::AttributeMethods::Dirty</a></li>
				
					<li><a href="../ActiveRecord/AttributeMethods/PrimaryKey.html">ActiveRecord::AttributeMethods::PrimaryKey</a></li>
				
					<li><a href="../ActiveRecord/AttributeMethods/PrimaryKey/ClassMethods.html">ActiveRecord::AttributeMethods::PrimaryKey::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/AttributeMethods/Query.html">ActiveRecord::AttributeMethods::Query</a></li>
				
					<li><a href="../ActiveRecord/AttributeMethods/Read.html">ActiveRecord::AttributeMethods::Read</a></li>
				
					<li><a href="../ActiveRecord/AttributeMethods/Read/ClassMethods.html">ActiveRecord::AttributeMethods::Read::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/AttributeMethods/TimeZoneConversion.html">ActiveRecord::AttributeMethods::TimeZoneConversion</a></li>
				
					<li><a href="../ActiveRecord/AttributeMethods/TimeZoneConversion/ClassMethods.html">ActiveRecord::AttributeMethods::TimeZoneConversion::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/AttributeMethods/Write.html">ActiveRecord::AttributeMethods::Write</a></li>
				
					<li><a href="../ActiveRecord/AttributeMethods/Write/ClassMethods.html">ActiveRecord::AttributeMethods::Write::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/AutosaveAssociation.html">ActiveRecord::AutosaveAssociation</a></li>
				
					<li><a href="../ActiveRecord/AutosaveAssociation/ClassMethods.html">ActiveRecord::AutosaveAssociation::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/Base.html">ActiveRecord::Base</a></li>
				
					<li><a href="../ActiveRecord/Calculations.html">ActiveRecord::Calculations</a></li>
				
					<li><a href="../ActiveRecord/Callbacks.html">ActiveRecord::Callbacks</a></li>
				
					<li><a href="../ActiveRecord/Callbacks/ClassMethods.html">ActiveRecord::Callbacks::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/ConfigurationError.html">ActiveRecord::ConfigurationError</a></li>
				
					<li><a href="../ActiveRecord/ConnectionAdapters/AbstractAdapter.html">ActiveRecord::ConnectionAdapters::AbstractAdapter</a></li>
				
					<li><a href="../ActiveRecord/ConnectionAdapters/Column.html">ActiveRecord::ConnectionAdapters::Column</a></li>
				
					<li><a href="../ActiveRecord/ConnectionAdapters/Column/Format.html">ActiveRecord::ConnectionAdapters::Column::Format</a></li>
				
					<li><a href="../ActiveRecord/ConnectionAdapters/ConnectionHandler.html">ActiveRecord::ConnectionAdapters::ConnectionHandler</a></li>
				
					<li><a href="../ActiveRecord/ConnectionAdapters/ConnectionManagement.html">ActiveRecord::ConnectionAdapters::ConnectionManagement</a></li>
				
					<li><a href="../ActiveRecord/ConnectionAdapters/ConnectionPool.html">ActiveRecord::ConnectionAdapters::ConnectionPool</a></li>
				
					<li><a href="../ActiveRecord/ConnectionAdapters/DatabaseLimits.html">ActiveRecord::ConnectionAdapters::DatabaseLimits</a></li>
				
					<li><a href="../ActiveRecord/ConnectionAdapters/DatabaseStatements.html">ActiveRecord::ConnectionAdapters::DatabaseStatements</a></li>
				
					<li><a href="../ActiveRecord/ConnectionAdapters/MysqlAdapter.html">ActiveRecord::ConnectionAdapters::MysqlAdapter</a></li>
				
					<li><a href="../ActiveRecord/ConnectionAdapters/PostgreSQLAdapter.html">ActiveRecord::ConnectionAdapters::PostgreSQLAdapter</a></li>
				
					<li><a href="../ActiveRecord/ConnectionAdapters/PostgreSQLColumn.html">ActiveRecord::ConnectionAdapters::PostgreSQLColumn</a></li>
				
					<li><a href="../ActiveRecord/ConnectionAdapters/QueryCache.html">ActiveRecord::ConnectionAdapters::QueryCache</a></li>
				
					<li><a href="../ActiveRecord/ConnectionAdapters/Quoting.html">ActiveRecord::ConnectionAdapters::Quoting</a></li>
				
					<li><a href="../ActiveRecord/ConnectionAdapters/SQLiteAdapter.html">ActiveRecord::ConnectionAdapters::SQLiteAdapter</a></li>
				
					<li><a href="../ActiveRecord/ConnectionAdapters/SQLiteAdapter/Version.html">ActiveRecord::ConnectionAdapters::SQLiteAdapter::Version</a></li>
				
					<li><a href="../ActiveRecord/ConnectionAdapters/SchemaStatements.html">ActiveRecord::ConnectionAdapters::SchemaStatements</a></li>
				
					<li><a href="../ActiveRecord/ConnectionAdapters/Table.html">ActiveRecord::ConnectionAdapters::Table</a></li>
				
					<li><a href="../ActiveRecord/ConnectionAdapters/TableDefinition.html">ActiveRecord::ConnectionAdapters::TableDefinition</a></li>
				
					<li><a href="../ActiveRecord/ConnectionNotEstablished.html">ActiveRecord::ConnectionNotEstablished</a></li>
				
					<li><a href="../ActiveRecord/ConnectionTimeoutError.html">ActiveRecord::ConnectionTimeoutError</a></li>
				
					<li><a href="../ActiveRecord/CounterCache.html">ActiveRecord::CounterCache</a></li>
				
					<li><a href="../ActiveRecord/DangerousAttributeError.html">ActiveRecord::DangerousAttributeError</a></li>
				
					<li><a href="../ActiveRecord/DynamicFinderMatch.html">ActiveRecord::DynamicFinderMatch</a></li>
				
					<li><a href="../ActiveRecord/DynamicScopeMatch.html">ActiveRecord::DynamicScopeMatch</a></li>
				
					<li><a href="../ActiveRecord/FinderMethods.html">ActiveRecord::FinderMethods</a></li>
				
					<li><a href="../ActiveRecord/Generators.html">ActiveRecord::Generators</a></li>
				
					<li><a href="../ActiveRecord/Generators/MigrationGenerator.html">ActiveRecord::Generators::MigrationGenerator</a></li>
				
					<li><a href="../ActiveRecord/Generators/ModelGenerator.html">ActiveRecord::Generators::ModelGenerator</a></li>
				
					<li><a href="../ActiveRecord/Generators/ObserverGenerator.html">ActiveRecord::Generators::ObserverGenerator</a></li>
				
					<li><a href="../ActiveRecord/Generators/SessionMigrationGenerator.html">ActiveRecord::Generators::SessionMigrationGenerator</a></li>
				
					<li><a href="../ActiveRecord/InvalidForeignKey.html">ActiveRecord::InvalidForeignKey</a></li>
				
					<li><a href="../ActiveRecord/IrreversibleMigration.html">ActiveRecord::IrreversibleMigration</a></li>
				
					<li><a href="../ActiveRecord/Locking.html">ActiveRecord::Locking</a></li>
				
					<li><a href="../ActiveRecord/Locking/Optimistic.html">ActiveRecord::Locking::Optimistic</a></li>
				
					<li><a href="../ActiveRecord/Locking/Optimistic/ClassMethods.html">ActiveRecord::Locking::Optimistic::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/Locking/Pessimistic.html">ActiveRecord::Locking::Pessimistic</a></li>
				
					<li><a href="../ActiveRecord/LogSubscriber.html">ActiveRecord::LogSubscriber</a></li>
				
					<li><a href="../ActiveRecord/Migration.html">ActiveRecord::Migration</a></li>
				
					<li><a href="../ActiveRecord/MigrationProxy.html">ActiveRecord::MigrationProxy</a></li>
				
					<li><a href="../ActiveRecord/MultiparameterAssignmentErrors.html">ActiveRecord::MultiparameterAssignmentErrors</a></li>
				
					<li><a href="../ActiveRecord/NamedScope.html">ActiveRecord::NamedScope</a></li>
				
					<li><a href="../ActiveRecord/NamedScope/ClassMethods.html">ActiveRecord::NamedScope::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/NestedAttributes/ClassMethods.html">ActiveRecord::NestedAttributes::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/NestedAttributes/TooManyRecords.html">ActiveRecord::NestedAttributes::TooManyRecords</a></li>
				
					<li><a href="../ActiveRecord/Observer.html">ActiveRecord::Observer</a></li>
				
					<li><a href="../ActiveRecord/Persistence.html">ActiveRecord::Persistence</a></li>
				
					<li><a href="../ActiveRecord/PredicateBuilder.html">ActiveRecord::PredicateBuilder</a></li>
				
					<li><a href="../ActiveRecord/PreparedStatementInvalid.html">ActiveRecord::PreparedStatementInvalid</a></li>
				
					<li><a href="../ActiveRecord/QueryCache.html">ActiveRecord::QueryCache</a></li>
				
					<li><a href="../ActiveRecord/QueryCache/ClassMethods.html">ActiveRecord::QueryCache::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/QueryMethods.html">ActiveRecord::QueryMethods</a></li>
				
					<li><a href="../ActiveRecord/Railtie.html">ActiveRecord::Railtie</a></li>
				
					<li><a href="../ActiveRecord/Railties.html">ActiveRecord::Railties</a></li>
				
					<li><a href="../ActiveRecord/Railties/ControllerRuntime.html">ActiveRecord::Railties::ControllerRuntime</a></li>
				
					<li><a href="../ActiveRecord/Railties/ControllerRuntime/ClassMethods.html">ActiveRecord::Railties::ControllerRuntime::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/ReadOnlyRecord.html">ActiveRecord::ReadOnlyRecord</a></li>
				
					<li><a href="../ActiveRecord/RecordInvalid.html">ActiveRecord::RecordInvalid</a></li>
				
					<li><a href="../ActiveRecord/RecordNotFound.html">ActiveRecord::RecordNotFound</a></li>
				
					<li><a href="../ActiveRecord/RecordNotSaved.html">ActiveRecord::RecordNotSaved</a></li>
				
					<li><a href="../ActiveRecord/RecordNotUnique.html">ActiveRecord::RecordNotUnique</a></li>
				
					<li><a href="../ActiveRecord/Reflection/ClassMethods.html">ActiveRecord::Reflection::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/Reflection/MacroReflection.html">ActiveRecord::Reflection::MacroReflection</a></li>
				
					<li><a href="../ActiveRecord/Relation.html">ActiveRecord::Relation</a></li>
				
					<li><a href="../ActiveRecord/Rollback.html">ActiveRecord::Rollback</a></li>
				
					<li><a href="../ActiveRecord/Schema.html">ActiveRecord::Schema</a></li>
				
					<li><a href="../ActiveRecord/Serialization.html">ActiveRecord::Serialization</a></li>
				
					<li><a href="../ActiveRecord/SerializationTypeMismatch.html">ActiveRecord::SerializationTypeMismatch</a></li>
				
					<li><a href="../ActiveRecord/SessionStore.html">ActiveRecord::SessionStore</a></li>
				
					<li><a href="../ActiveRecord/SessionStore/Session.html">ActiveRecord::SessionStore::Session</a></li>
				
					<li><a href="../ActiveRecord/SessionStore/SqlBypass.html">ActiveRecord::SessionStore::SqlBypass</a></li>
				
					<li><a href="../ActiveRecord/SpawnMethods.html">ActiveRecord::SpawnMethods</a></li>
				
					<li><a href="../ActiveRecord/StaleObjectError.html">ActiveRecord::StaleObjectError</a></li>
				
					<li><a href="../ActiveRecord/StatementInvalid.html">ActiveRecord::StatementInvalid</a></li>
				
					<li><a href="../ActiveRecord/TestFixtures.html">ActiveRecord::TestFixtures</a></li>
				
					<li><a href="../ActiveRecord/TestFixtures/ClassMethods.html">ActiveRecord::TestFixtures::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/ThrowResult.html">ActiveRecord::ThrowResult</a></li>
				
					<li><a href="../ActiveRecord/Timestamp.html">ActiveRecord::Timestamp</a></li>
				
					<li><a href="../ActiveRecord/Transactions.html">ActiveRecord::Transactions</a></li>
				
					<li><a href="../ActiveRecord/Transactions/ClassMethods.html">ActiveRecord::Transactions::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/UnknownAttributeError.html">ActiveRecord::UnknownAttributeError</a></li>
				
					<li><a href="../ActiveRecord/Validations.html">ActiveRecord::Validations</a></li>
				
					<li><a href="../ActiveRecord/Validations/AssociatedValidator.html">ActiveRecord::Validations::AssociatedValidator</a></li>
				
					<li><a href="../ActiveRecord/Validations/ClassMethods.html">ActiveRecord::Validations::ClassMethods</a></li>
				
					<li><a href="../ActiveRecord/Validations/UniquenessValidator.html">ActiveRecord::Validations::UniquenessValidator</a></li>
				
					<li><a href="../ActiveRecord/WrappedDatabaseException.html">ActiveRecord::WrappedDatabaseException</a></li>
				
					<li><a href="../Fixtures.html">Fixtures</a></li>
				
					<li><a href="../FixturesFileNotFound.html">FixturesFileNotFound</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="module">ActiveRecord::Persistence</h1>

		<div id="description">
			<h1>Active Record <a href="Persistence.html">Persistence</a></h1>

		</div>

		<!-- Constants -->
		

		<!-- Attributes -->
		

		<!-- Methods -->
		
		<div id="public-instance-method-details" class="method-section section">
			<h3 class="section-header">Public Instance Methods</h3>

		
			<div id="becomes-method" class="method-detail ">
				<a name="method-i-becomes"></a>

				<div class="method-heading">
				
					<span class="method-name">becomes</span><span
						class="method-args">(klass)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns an instance of the specified <tt>klass</tt> with the attributes of
the current record. This is mostly useful in relation to single-table
inheritance structures where you want a subclass to appear as the
superclass. This can be used along with record identification in Action
Pack to allow, say, <tt>Client &lt; Company</tt> to do something like
render <tt>:partial =&gt; @client.becomes(Company)</tt> to render that
instance using the companies/company partial instead of clients/client.
</p>
<p>
Note: The new instance will share a link to the same attributes as the
original class. So any change to the attributes in either instance will
affect the other.
</p>
					

					
					<div class="method-source-code"
						id="becomes-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 96</span>
 96:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">becomes</span>(<span class="ruby-identifier">klass</span>)
 97:       <span class="ruby-identifier">became</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>
 98:       <span class="ruby-identifier">became</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@attributes&quot;</span>, <span class="ruby-ivar">@attributes</span>)
 99:       <span class="ruby-identifier">became</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@attributes_cache&quot;</span>, <span class="ruby-ivar">@attributes_cache</span>)
100:       <span class="ruby-identifier">became</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@new_record&quot;</span>, <span class="ruby-identifier">new_record?</span>)
101:       <span class="ruby-identifier">became</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@destroyed&quot;</span>, <span class="ruby-identifier">destroyed?</span>)
102:       <span class="ruby-identifier">became</span>
103:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="decrement-method" class="method-detail ">
				<a name="method-i-decrement"></a>

				<div class="method-heading">
				
					<span class="method-name">decrement</span><span
						class="method-args">(attribute, by = 1)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Initializes <tt>attribute</tt> to zero if <tt>nil</tt> and subtracts the
value passed as <tt>by</tt> (default is 1). The decrement is performed
directly on the underlying attribute, no setter is invoked. Only makes
sense for number-based attributes. Returns <tt>self</tt>.
</p>
					

					
					<div class="method-source-code"
						id="decrement-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 163</span>
163:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decrement</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span> = <span class="ruby-value">1</span>)
164:       <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">||=</span> <span class="ruby-value">0</span>
165:       <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">-=</span> <span class="ruby-identifier">by</span>
166:       <span class="ruby-keyword kw">self</span>
167:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="decrement--method" class="method-detail ">
				<a name="method-i-decrement%21"></a>

				<div class="method-heading">
				
					<span class="method-name">decrement!</span><span
						class="method-args">(attribute, by = 1)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Wrapper around <tt>decrement</tt> that saves the record. This method
differs from its non-bang version in that it passes through the attribute
setter. Saving is not subjected to validation checks. Returns <tt>true</tt>
if the record could be saved.
</p>
					

					
					<div class="method-source-code"
						id="decrement--source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 173</span>
173:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">decrement!</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span> = <span class="ruby-value">1</span>)
174:       <span class="ruby-identifier">decrement</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span>).<span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>])
175:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="delete-method" class="method-detail ">
				<a name="method-i-delete"></a>

				<div class="method-heading">
				
					<span class="method-name">delete</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Deletes the record in the database and freezes this instance to reflect
that no changes should be made (since they can&#8217;t be persisted).
Returns the frozen instance.
</p>
<p>
The row is simply removed with an SQL <tt>DELETE</tt> statement on the
record&#8217;s primary key, and no callbacks are executed.
</p>
<p>
To enforce the object&#8217;s <tt>before_destroy</tt> and
<tt>after_destroy</tt> callbacks, <a href="Observer.html">Observer</a>
methods, or any <tt>:dependent</tt> association options, use <tt><a
href="Persistence.html#method-i-destroy">#</a></tt>.
</p>
					

					
					<div class="method-source-code"
						id="delete-source">
<pre>
    <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 69</span>
69:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete</span>
70:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">id</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">persisted?</span>
71:       <span class="ruby-ivar">@destroyed</span> = <span class="ruby-keyword kw">true</span>
72:       <span class="ruby-identifier">freeze</span>
73:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="destroy-method" class="method-detail ">
				<a name="method-i-destroy"></a>

				<div class="method-heading">
				
					<span class="method-name">destroy</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Deletes the record in the database and freezes this instance to reflect
that no changes should be made (since they can&#8217;t be persisted).
</p>
					

					
					<div class="method-source-code"
						id="destroy-source">
<pre>
    <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 77</span>
77:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroy</span>
78:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">persisted?</span>
79:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">unscoped</span>.<span class="ruby-identifier">where</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">arel_table</span>[<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">primary_key</span>].<span class="ruby-identifier">eq</span>(<span class="ruby-identifier">id</span>)).<span class="ruby-identifier">delete_all</span>
80:       <span class="ruby-keyword kw">end</span>
81: 
82:       <span class="ruby-ivar">@destroyed</span> = <span class="ruby-keyword kw">true</span>
83:       <span class="ruby-identifier">freeze</span>
84:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="destroyed--method" class="method-detail ">
				<a name="method-i-destroyed%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">destroyed?</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns true if this object has been destroyed, otherwise returns false.
</p>
					

					
					<div class="method-source-code"
						id="destroyed--source">
<pre>
    <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 11</span>
11:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroyed?</span>
12:       <span class="ruby-ivar">@destroyed</span>
13:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="increment-method" class="method-detail ">
				<a name="method-i-increment"></a>

				<div class="method-heading">
				
					<span class="method-name">increment</span><span
						class="method-args">(attribute, by = 1)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Initializes <tt>attribute</tt> to zero if <tt>nil</tt> and adds the value
passed as <tt>by</tt> (default is 1). The increment is performed directly
on the underlying attribute, no setter is invoked. Only makes sense for
number-based attributes. Returns <tt>self</tt>.
</p>
					

					
					<div class="method-source-code"
						id="increment-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 146</span>
146:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">increment</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span> = <span class="ruby-value">1</span>)
147:       <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">||=</span> <span class="ruby-value">0</span>
148:       <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">by</span>
149:       <span class="ruby-keyword kw">self</span>
150:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="increment--method" class="method-detail ">
				<a name="method-i-increment%21"></a>

				<div class="method-heading">
				
					<span class="method-name">increment!</span><span
						class="method-args">(attribute, by = 1)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Wrapper around <tt>increment</tt> that saves the record. This method
differs from its non-bang version in that it passes through the attribute
setter. Saving is not subjected to validation checks. Returns <tt>true</tt>
if the record could be saved.
</p>
					

					
					<div class="method-source-code"
						id="increment--source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 156</span>
156:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">increment!</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span> = <span class="ruby-value">1</span>)
157:       <span class="ruby-identifier">increment</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">by</span>).<span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>])
158:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="new-record--method" class="method-detail ">
				<a name="method-i-new_record%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">new_record?</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns true if this object hasn&#8217;t been saved yet &#8212; that is, a
record for the object doesn&#8217;t exist in the data store yet; otherwise,
returns false.
</p>
					

					
					<div class="method-source-code"
						id="new-record--source">
<pre>
   <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 6</span>
6:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">new_record?</span>
7:       <span class="ruby-ivar">@new_record</span>
8:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="persisted--method" class="method-detail ">
				<a name="method-i-persisted%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">persisted?</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns if the record is persisted, i.e. it&#8217;s not a new record and it
was not destroyed.
</p>
					

					
					<div class="method-source-code"
						id="persisted--source">
<pre>
    <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 17</span>
17:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">persisted?</span>
18:       <span class="ruby-operator">!</span>(<span class="ruby-identifier">new_record?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">destroyed?</span>)
19:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="reload-method" class="method-detail ">
				<a name="method-i-reload"></a>

				<div class="method-heading">
				
					<span class="method-name">reload</span><span
						class="method-args">(options = nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Reloads the attributes of this object from the database. The optional
options argument is passed to find when reloading so you may do e.g.
record.reload(:lock => true) to reload the same record with an exclusive
row lock.
</p>
					

					
					<div class="method-source-code"
						id="reload-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 198</span>
198:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reload</span>(<span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>)
199:       <span class="ruby-identifier">clear_aggregation_cache</span>
200:       <span class="ruby-identifier">clear_association_cache</span>
201:       <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">update</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">unscoped</span> { <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">find</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">options</span>) }.<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-value str">'@attributes'</span>))
202:       <span class="ruby-ivar">@attributes_cache</span> = {}
203:       <span class="ruby-keyword kw">self</span>
204:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="save-method" class="method-detail ">
				<a name="method-i-save"></a>

				<div class="method-heading">
				
					<span class="method-callseq">save(options)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Saves the model.
</p>
<p>
If the model is new a record gets created in the database, otherwise the
existing record gets updated.
</p>
<p>
By default, save always run validations. If any of them fail the action is
cancelled and <tt>save</tt> returns <tt>false</tt>. However, if you supply
:validate => false, validations are bypassed altogether. See <a
href="Validations.html">ActiveRecord::Validations</a> for more information.
</p>
<p>
There&#8217;s a series of callbacks associated with <tt>save</tt>. If any
of the <tt>before_*</tt> callbacks return <tt>false</tt> the action is
cancelled and <tt>save</tt> returns <tt>false</tt>. See <a
href="Callbacks.html">ActiveRecord::Callbacks</a> for further details.
</p>
					

					
					<div class="method-source-code"
						id="save-source">
<pre>
    <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 38</span>
38:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save</span>(*)
39:       <span class="ruby-identifier">create_or_update</span>
40:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="save--method" class="method-detail ">
				<a name="method-i-save%21"></a>

				<div class="method-heading">
				
					<span class="method-name">save!</span><span
						class="method-args">(*)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Saves the model.
</p>
<p>
If the model is new a record gets created in the database, otherwise the
existing record gets updated.
</p>
<p>
With <tt>save!</tt> validations always run. If any of them fail <a
href="RecordInvalid.html">ActiveRecord::RecordInvalid</a> gets raised. See
<a href="Validations.html">ActiveRecord::Validations</a> for more
information.
</p>
<p>
There&#8217;s a series of callbacks associated with <tt>save!</tt>. If any
of the <tt>before_*</tt> callbacks return <tt>false</tt> the action is
cancelled and <tt>save!</tt> raises <a
href="RecordNotSaved.html">ActiveRecord::RecordNotSaved</a>. See <a
href="Callbacks.html">ActiveRecord::Callbacks</a> for further details.
</p>
					

					
					<div class="method-source-code"
						id="save--source">
<pre>
    <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 55</span>
55:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save!</span>(*)
56:       <span class="ruby-identifier">create_or_update</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">raise</span>(<span class="ruby-constant">RecordNotSaved</span>)
57:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="toggle-method" class="method-detail ">
				<a name="method-i-toggle"></a>

				<div class="method-heading">
				
					<span class="method-name">toggle</span><span
						class="method-args">(attribute)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Assigns to <tt>attribute</tt> the boolean opposite of <tt>attribute?</tt>.
So if the predicate returns <tt>true</tt> the attribute will become
<tt>false</tt>. This method toggles directly the underlying value without
calling any setter. Returns <tt>self</tt>.
</p>
					

					
					<div class="method-source-code"
						id="toggle-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 181</span>
181:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">toggle</span>(<span class="ruby-identifier">attribute</span>)
182:       <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>] = <span class="ruby-operator">!</span><span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{attribute}?&quot;</span>)
183:       <span class="ruby-keyword kw">self</span>
184:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="toggle--method" class="method-detail ">
				<a name="method-i-toggle%21"></a>

				<div class="method-heading">
				
					<span class="method-name">toggle!</span><span
						class="method-args">(attribute)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Wrapper around <tt>toggle</tt> that saves the record. This method differs
from its non-bang version in that it passes through the attribute setter.
Saving is not subjected to validation checks. Returns <tt>true</tt> if the
record could be saved.
</p>
					

					
					<div class="method-source-code"
						id="toggle--source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 190</span>
190:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">toggle!</span>(<span class="ruby-identifier">attribute</span>)
191:       <span class="ruby-identifier">toggle</span>(<span class="ruby-identifier">attribute</span>).<span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">attribute</span>])
192:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="touch-method" class="method-detail ">
				<a name="method-i-touch"></a>

				<div class="method-heading">
				
					<span class="method-name">touch</span><span
						class="method-args">(name = nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Saves the record with the updated_at/on attributes set to the current time.
Please note that no validation is performed and no callbacks are executed.
If an attribute name is passed, that attribute is updated along with
updated_at/on attributes.
</p>
<pre>
  product.touch               # updates updated_at/on
  product.touch(:designed_at) # updates the designed_at attribute and updated_at/on
</pre>
<p>
If used along with <tt>belongs_to</tt> then <tt>touch</tt> will invoke
<tt>touch</tt> method on associated object.
</p>
<pre>
  class Brake &lt; ActiveRecord::Base
    belongs_to :car, :touch =&gt; true
  end

  class Car &lt; ActiveRecord::Base
    belongs_to :corporation, :touch =&gt; true
  end

  # triggers @brake.car.touch and @brake.car.corporation.touch
  @brake.touch</pre>
					

					
					<div class="method-source-code"
						id="touch-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 226</span>
226:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">touch</span>(<span class="ruby-identifier">name</span> = <span class="ruby-keyword kw">nil</span>)
227:       <span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">timestamp_attributes_for_update_in_model</span>
228:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">blank?</span>
229:         <span class="ruby-identifier">attributes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span>
230: 
231:         <span class="ruby-identifier">current_time</span> = <span class="ruby-identifier">current_time_from_proper_timezone</span>
232:         <span class="ruby-identifier">changes</span> = {}
233: 
234:         <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">column</span><span class="ruby-operator">|</span>
235:           <span class="ruby-identifier">changes</span>[<span class="ruby-identifier">column</span>.<span class="ruby-identifier">to_s</span>] = <span class="ruby-identifier">write_attribute</span>(<span class="ruby-identifier">column</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">current_time</span>)
236:         <span class="ruby-keyword kw">end</span>
237: 
238:         <span class="ruby-ivar">@changed_attributes</span>.<span class="ruby-identifier">except!</span>(*<span class="ruby-identifier">changes</span>.<span class="ruby-identifier">keys</span>)
239:         <span class="ruby-identifier">primary_key</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">primary_key</span>
240:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-identifier">changes</span>, { <span class="ruby-identifier">primary_key</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">primary_key</span>] }) <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
241:       <span class="ruby-keyword kw">end</span>
242:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="update-attribute-method" class="method-detail ">
				<a name="method-i-update_attribute"></a>

				<div class="method-heading">
				
					<span class="method-name">update_attribute</span><span
						class="method-args">(name, value)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Updates a single attribute and saves the record. This is especially useful
for boolean flags on existing records. Also note that
</p>
<ul>
<li><p>
Validation is skipped.
</p>
</li>
<li><p>
<a href="Callbacks.html">Callbacks</a> are invoked.
</p>
</li>
<li><p>
updated_at/updated_on column is updated if that column is available.
</p>
</li>
<li><p>
Updates all the attributes that are dirty in this object.
</p>
</li>
</ul>
					

					
					<div class="method-source-code"
						id="update-attribute-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 113</span>
113:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>)
114:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>
115:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecordError</span>, <span class="ruby-node">&quot;#{name} is marked as readonly&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">readonly_attributes</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">name</span>)
116:       <span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;#{name}=&quot;</span>, <span class="ruby-identifier">value</span>)
117:       <span class="ruby-identifier">save</span>(<span class="ruby-value">:validate</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>)
118:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="update-attributes-method" class="method-detail ">
				<a name="method-i-update_attributes"></a>

				<div class="method-heading">
				
					<span class="method-name">update_attributes</span><span
						class="method-args">(attributes)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Updates the attributes of the model from the passed-in hash and saves the
record, all wrapped in a transaction. If the object is invalid, the saving
will fail and false will be returned.
</p>
					

					
					<div class="method-source-code"
						id="update-attributes-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 123</span>
123:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">attributes</span>)
124:       <span class="ruby-comment cmt"># The following transaction covers any possible database side-effects of the</span>
125:       <span class="ruby-comment cmt"># attributes assignment. For example, setting the IDs of a child collection.</span>
126:       <span class="ruby-identifier">with_transaction_returning_status</span> <span class="ruby-keyword kw">do</span>
127:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
128:         <span class="ruby-identifier">save</span>
129:       <span class="ruby-keyword kw">end</span>
130:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="update-attributes--method" class="method-detail ">
				<a name="method-i-update_attributes%21"></a>

				<div class="method-heading">
				
					<span class="method-name">update_attributes!</span><span
						class="method-args">(attributes)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Updates its receiver just like <tt><a
href="Persistence.html#method-i-update_attributes">update_attributes</a></tt>
but calls <tt>save!</tt> instead of <tt>save</tt>, so an exception is
raised if the record is invalid.
</p>
					

					
					<div class="method-source-code"
						id="update-attributes--source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 134</span>
134:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_attributes!</span>(<span class="ruby-identifier">attributes</span>)
135:       <span class="ruby-comment cmt"># The following transaction covers any possible database side-effects of the</span>
136:       <span class="ruby-comment cmt"># attributes assignment. For example, setting the IDs of a child collection.</span>
137:       <span class="ruby-identifier">with_transaction_returning_status</span> <span class="ruby-keyword kw">do</span>
138:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
139:         <span class="ruby-identifier">save!</span>
140:       <span class="ruby-keyword kw">end</span>
141:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="private-instance-method-details" class="method-section section">
			<h3 class="section-header">Private Instance Methods</h3>

		
			<div id="attributes-from-column-definition-method" class="method-detail ">
				<a name="method-i-attributes_from_column_definition"></a>

				<div class="method-heading">
				
					<span class="method-name">attributes_from_column_definition</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Initializes the attributes array with keys matching the columns from the
linked table and the values matching the corresponding default value of
that column, so that a new instance, or one populated from a passed-in
Hash, still has all the attributes that instances loaded from the database
would.
</p>
					

					
					<div class="method-source-code"
						id="attributes-from-column-definition-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 284</span>
284:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attributes_from_column_definition</span>
285:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">columns</span>.<span class="ruby-identifier">inject</span>({}) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">column</span><span class="ruby-operator">|</span>
286:         <span class="ruby-identifier">attributes</span>[<span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">column</span>.<span class="ruby-identifier">default</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">primary_key</span>
287:         <span class="ruby-identifier">attributes</span>
288:       <span class="ruby-keyword kw">end</span>
289:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="create-method" class="method-detail ">
				<a name="method-i-create"></a>

				<div class="method-heading">
				
					<span class="method-name">create</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Creates a record with values matching those of the instance attributes and
returns its id.
</p>
					

					
					<div class="method-source-code"
						id="create-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 261</span>
261:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create</span>
262:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">prefetch_primary_key?</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">table_name</span>)
263:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span> = <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">next_sequence_value</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">sequence_name</span>)
264:       <span class="ruby-keyword kw">end</span>
265: 
266:       <span class="ruby-identifier">attributes_values</span> = <span class="ruby-identifier">arel_attributes_values</span>
267: 
268:       <span class="ruby-identifier">new_id</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attributes_values</span>.<span class="ruby-identifier">empty?</span>
269:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">unscoped</span>.<span class="ruby-identifier">insert</span> <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">empty_insert_statement_value</span>
270:       <span class="ruby-keyword kw">else</span>
271:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">unscoped</span>.<span class="ruby-identifier">insert</span> <span class="ruby-identifier">attributes_values</span>
272:       <span class="ruby-keyword kw">end</span>
273: 
274:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">new_id</span>
275: 
276:       <span class="ruby-ivar">@new_record</span> = <span class="ruby-keyword kw">false</span>
277:       <span class="ruby-identifier">id</span>
278:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="create-or-update-method" class="method-detail ">
				<a name="method-i-create_or_update"></a>

				<div class="method-heading">
				
					<span class="method-name">create_or_update</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="create-or-update-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 245</span>
245:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_or_update</span>
246:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ReadOnlyRecord</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">readonly?</span>
247:       <span class="ruby-identifier">result</span> = <span class="ruby-identifier">new_record?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">create</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">update</span>
248:       <span class="ruby-identifier">result</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">false</span>
249:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="update-method" class="method-detail ">
				<a name="method-i-update"></a>

				<div class="method-heading">
				
					<span class="method-name">update</span><span
						class="method-args">(attribute_names = @attributes.keys)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Updates the associated record with values matching those of the instance
attributes. Returns the number of affected rows.
</p>
					

					
					<div class="method-source-code"
						id="update-source">
<pre>
     <span class="ruby-comment cmt"># File lib/active_record/persistence.rb, line 253</span>
253:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update</span>(<span class="ruby-identifier">attribute_names</span> = <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">keys</span>)
254:       <span class="ruby-identifier">attributes_with_values</span> = <span class="ruby-identifier">arel_attributes_values</span>(<span class="ruby-keyword kw">false</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">attribute_names</span>)
255:       <span class="ruby-keyword kw">return</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attributes_with_values</span>.<span class="ruby-identifier">empty?</span>
256:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">unscoped</span>.<span class="ruby-identifier">where</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">arel_table</span>[<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">primary_key</span>].<span class="ruby-identifier">eq</span>(<span class="ruby-identifier">id</span>)).<span class="ruby-identifier">arel</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">attributes_with_values</span>)
257:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

